â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   PROMPT DLA COPILOT - BTW INTEGRATION                    â•‘
â•‘                      SKOPIUJ I WKLEJ CAÅOÅšÄ†                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Pobierz z https://github.com/norbi07011/mesu-bouw- (branch main, commit 79979d4) 
kompletny moduÅ‚ BTW Aangifte i zintegruj go z mojÄ… aplikacjÄ….

âš ï¸ ZASADY INTEGRACJI - MUSISZ PRZESTRZEGAÄ†:

1. NIE NADPISUJ istniejÄ…cych plikÃ³w - tylko ROZSZERZAJ
2. NIE USUWAJ Å¼adnych funkcji, hookÃ³w, komponentÃ³w
3. NIE ZMIENIAJ struktury moich folderÃ³w
4. DOSTOSUJ importy i Å›cieÅ¼ki do mojej struktury
5. ZACHOWAJ wszystkie dziaÅ‚ajÄ…ce funkcje (faktury, klienci, produkty)
6. DODAJ nowy kod BEZ konfliktÃ³w z istniejÄ…cym

ğŸ“¦ CO ZROBIÄ†:

NOWE PLIKI (skopiuj):
âœ… src/pages/BTWAangifte.tsx - gÅ‚Ã³wny komponent BTW (680 linii)

ROZSZERZ ISTNIEJÄ„CE (merge, nie replace!):

âœ… src/App.tsx:
   - import BTWAangifte from './pages/BTWAangifte';
   - import { Receipt } from '@phosphor-icons/react';
   - Dodaj 'btw' do type Page
   - Dodaj do navItems: { id: 'btw', icon: Receipt, label: t('nav.btw') }
   - Dodaj case 'btw': return <BTWAangifte />;

âœ… src/hooks/useElectronDB.ts (dopisz na koÅ„cu):
   - useBTW() - zarzÄ…dzanie deklaracjami BTW
   - useExpenses() - pobieranie wydatkÃ³w
   - useKilometers() - pobieranie kilometrÃ³w

âœ… src/lib/pdf-generator.ts (dopisz na koÅ„cu):
   - generateBTWDeclarationPDF() - generowanie PDF z deklaracjÄ…

âœ… src/types/btw.ts (rozszerz):
   - BTWDeclaration interface
   - BTWCalculationData interface
   - BTWPeriod type

âœ… src/i18n/pl.ts, nl.ts, en.ts:
   - nav.btw: 'BTW Aangifte' / 'VAT Declaration'
   - PeÅ‚na sekcja btw: { title, subtitle, declarationSaved, ... }

âœ… package.json:
   - "jspdf": "^2.5.2"
   - "jspdf-autotable": "^3.8.3"

ğŸ¯ FUNKCJONALNOÅšÄ† BTW:

1. AUTOMATYCZNE POBIERANIE z wszystkich moduÅ‚Ã³w:
   - Faktury (Invoices) â†’ przychody + VAT naleÅ¼ny
   - Wydatki (Expenses) â†’ VAT naliczony do odliczenia
   - Kilometry (Kilometers) â†’ prywatne uÅ¼ycie auta

2. AUTOMATYCZNE KALKULACJE w czasie rzeczywistym:
   - Wykrywa stawki VAT: 21%, 9%, 0%, reverse charge
   - Oblicza VAT naleÅ¼ny z przychodÃ³w
   - Oblicza VAT naliczony z wydatkÃ³w
   - Oblicza VAT z prywatnych km (â‚¬0.21/km)
   - Kalkuluje bilans (do zapÅ‚aty/zwrot)

3. DASHBOARD z 4 KARTAMI:
   - Karta 1 (niebieska): Przychody - podziaÅ‚ na stawki
   - Karta 2 (czerwona): VAT naleÅ¼ny - suma do zapÅ‚aty
   - Karta 3 (zielona): VAT naliczony - suma do odliczenia
   - Karta 4 (pomaraÅ„czowa/fioletowa): Bilans koÅ„cowy

4. SELEKTOR OKRESU:
   - WybÃ³r roku (4 ostatnie lata)
   - WybÃ³r kwartaÅ‚u (Q1, Q2, Q3, Q4)
   - Automatyczny przeliczanie przy zmianie

5. DEADLINE MONITORING:
   - Automatyczne obliczanie terminu pÅ‚atnoÅ›ci
   - OstrzeÅ¼enia: czerwone (po terminie), pomaraÅ„czowe (pilne), zielone (OK)
   - Licznik dni do deadline

6. SZCZEGÃ“ÅOWA TABELA RUBRYK:
   - Rubriek 1a: Leveringen 21% + VAT
   - Rubriek 1b: Leveringen 9% + VAT
   - Rubriek 1c: Leveringen 0%
   - Rubriek 1d: Reverse charge
   - Rubriek 4: PrivÃ©gebruik (prywatne km)
   - Rubriek 5b: Voorbelasting (VAT do odliczenia)
   - Podsumowanie: Te betalen/Aftrekbaar/Saldo

7. ZARZÄ„DZANIE DEKLARACJAMI:
   - Zapis jako concept (szkic)
   - Zapis jako ingediend (zÅ‚oÅ¼ona)
   - Aktualizacja istniejÄ…cych
   - Historia wszystkich deklaracji
   - Usuwanie deklaracji

8. EKSPORT PDF - KOMPLETNY DOKUMENT dla ksiÄ™gowego:
   âœ… Header z logo i danymi firmy
   âœ… Tabela wszystkich rubryk (1a-5b)
   âœ… SzczegÃ³Å‚owe obliczenia VAT
   âœ… Podsumowanie finansowe
   âœ… Wszystkie przychody z okresu
   âœ… Wszystkie wydatki z okresu
   âœ… Wszystkie kilometry z okresu
   âœ… KoÅ„cowy bilans (do zapÅ‚aty/zwrot)
   âœ… Status deklaracji
   âœ… Data wygenerowania
   â†’ KSIÄ˜GOWY MA WSZYSTKO czego potrzebuje!

9. HISTORIA DEKLARACJI:
   - Tabela wszystkich zapisanych deklaracji
   - Filtry: okres, status
   - Kolumny: okres, status, przychÃ³d, VAT, saldo
   - Przyciski: PDF export, edycja, usuwanie

ğŸ“‹ STRUKTURA DANYCH (kompatybilnoÅ›Ä‡):

Faktury (Invoices):
{
  id: string;
  issue_date: string;     // "2025-01-15"
  total_net: number;
  total_vat: number;
  vat_note?: string;      // "reverse charge" â†’ wykrywa odwrotne
  status: string;
}

Wydatki (Expenses):
{
  id: string;
  date: string;           // "2025-01-15"
  vat_amount: number;
  amount: number;
}

Kilometry (Kilometers):
{
  id: string;
  date: string;           // "2025-01-15"
  distance: number;
  is_private: boolean;
}

âš ï¸ JeÅ›li moja struktura jest inna - dostosuj kalkulacje w BTWAangifte.tsx!

ğŸ”„ PROCES INTEGRACJI:

KROK 1: Pobierz BTWAangifte.tsx z repo
KROK 2: Dostosuj importy do mojej struktury folderÃ³w
KROK 3: Dopisz 3 hooki do useElectronDB.ts (koniec pliku)
KROK 4: Dodaj generateBTWDeclarationPDF() do pdf-generator.ts
KROK 5: Rozszerz App.tsx o routing BTW (zachowaj stare!)
KROK 6: Dodaj typy BTW do types/
KROK 7: Dodaj tÅ‚umaczenia do i18n/ (PL, NL, EN)
KROK 8: npm install jspdf jspdf-autotable
KROK 9: npm run dev i testuj!

âœ… WERYFIKACJA po integracji:

â–¡ Menu pokazuje "BTW Aangifte" z ikonÄ…
â–¡ KlikniÄ™cie w BTW otwiera stronÄ™
â–¡ 4 karty wyÅ›wietlajÄ… dane
â–¡ Selektor roku/kwartaÅ‚u dziaÅ‚a
â–¡ Dane z faktur siÄ™ pobierajÄ…
â–¡ Dane z wydatkÃ³w siÄ™ pobierajÄ…
â–¡ Dane z kilometrÃ³w siÄ™ pobierajÄ…
â–¡ Kalkulacje siÄ™ przeliczajÄ…
â–¡ Tabela rubryk jest poprawna
â–¡ "Opslaan" zapisuje deklaracjÄ™
â–¡ "Export PDF" generuje plik
â–¡ PDF zawiera wszystkie dane
â–¡ Historia deklaracji dziaÅ‚a
â–¡ Usuwanie dziaÅ‚a
â–¡ TÅ‚umaczenia dziaÅ‚ajÄ… (PL/NL/EN)
â–¡ WSZYSTKIE STARE funkcje nadal dziaÅ‚ajÄ…!

ğŸ†˜ PROBLEMY?

"Cannot find module 'jspdf'" â†’ npm install jspdf jspdf-autotable
"Cannot find BTWAangifte" â†’ sprawdÅº import path
"Missing translation key" â†’ dodaj sekcjÄ™ btw: {} w i18n
"Kalkulacje pokazujÄ… 0" â†’ sprawdÅº format dat (YYYY-MM-DD)
"PDF nie dziaÅ‚a" â†’ sprawdÅº console, czy jspdf zainstalowany

ğŸ“š PEÅNA DOKUMENTACJA:

Repo: https://github.com/norbi07011/mesu-bouw-
Commit: 79979d4
Pliki:
- COPILOT-PROMPT-BTW-INTEGRATION.md (peÅ‚ny przewodnik, 885 linii)
- BTW-INTEGRATION-GUIDE.md (szczegÃ³Å‚y integracji)
- BTW-SYSTEM-COMPLETE.md (dokumentacja systemu BTW)
- BTW-QUICK-REFERENCE.txt (szybka Å›ciÄ…ga)

Link do commitu:
https://github.com/norbi07011/mesu-bouw-/commit/79979d4

Link do pliku BTW:
https://github.com/norbi07011/mesu-bouw-/blob/main/src/pages/BTWAangifte.tsx

ğŸ¯ PODSUMOWANIE:

BTW Aangifte to kompletny moduÅ‚ do:
âœ… Automatycznego obliczania VAT z faktur, wydatkÃ³w, kilometrÃ³w
âœ… Kwartalnych deklaracji BTW dla holenderskiego systemu
âœ… Eksportu PDF z WSZYSTKIMI danymi dla ksiÄ™gowego
âœ… ZarzÄ…dzania historiÄ… deklaracji
âœ… Monitorowania deadlines
âœ… ZgodnoÅ›ci z holenderskimi rubrikami (1a-5b)

ModuÅ‚ NIE PSUJE istniejÄ…cej aplikacji - TYLKO DODAJE funkcjonalnoÅ›Ä‡!

Po integracji: npm install â†’ npm run dev â†’ testuj!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ GOTOWE! Skopiuj ten prompt do Copilot Chat i zintegruj BTW! ğŸš€
